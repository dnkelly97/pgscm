{% extends 'base.html' %}

{% load static %}

{% block title %}Create a Pipeline{% endblock %}

{% block content %}
    <h5 class="card-header">Create Pipeline</h5><br>

    <div class="col-6">
        <div class="card h-100">
            <div class="card-body">
                <h5 class="card-title">Select Pipeline Source</h5>
                <div class="container overflow-auto" style="max-height: 200px;">
                    <form id="select_query_form">
                        <div id="saved_query_menu">
                            {% include 'saved_query_menu.html' %}
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <br>
    <br>

    <form method="POST" class="form-group" id="create_pipeline_form">
        {% csrf_token %}
        <div class="input-group mb-3">
            <div class="input-group-append">
                <span class="input-group-text">{{form.name.label}}</span>
            </div>
            {{form.name}}
        </div>
        <div class="input-group mb-3">
            <div class="input-group-append">
                <span class="input-group-text">{{form.num_stages.label}}</span>
            </div>
            {{form.num_stages}}
        </div>
        <button id="create_pipeline_submit_button" name="create_pipeline_submit" class="btn btn-primary" type="submit">Create</button>
    </form>

    <!-- Modal -->
    <div class="modal" id="define_stages_modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="ModalLabel">Define Stages</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">Ã—</span>
                </button>
                </div>
                <div>
                    <form action="{% url 'define_stages' 'null' %}" id="define_stages_form">
                        {% csrf_token %}
                        <div id="define_stages_formholder">
                            {% include 'define_stages.html' %}
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

{% endblock %}

{% block javascript %}
    <script src="{% static 'js/pipeline/create_pipeline.js' %}"></script>
{% endblock %}
